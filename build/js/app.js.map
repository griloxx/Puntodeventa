{"version":3,"sources":["app.js"],"names":["window","location","href","indexOf","document","querySelector","addEventListener","event","preventDefault","getElementById","$","ajax","url","method","success","response","console","log","error","xhr","status","btnNewCat","btnCerrar","abrir","body","style","overflow","display","abrirCliente","cerrarCliente","abrirModal","abrirACliente","cerrarACliente","abrirAModal","abrirModalPrecio","querySelectorAll","cerrarModalPrecio","forEach","btn","id","getAttribute","modalPrecio","btnNewCatEditar","btnCerrarEditar","abrirEditar","btnNewArt","btnCerrarArt","abrirArt","btnNewArtA","btnCerrarArtA","calcularPrecioVenta","base","value","iva","precioVenta","parseFloat","toFixed","calcularBase","calcularBaseCompra","calcularPrecioCompra","precioCompra","addParamCat","newParamValue","target","previousElementSibling","encodedNewParamValue","encodeURIComponent","separator","newUrl","abrirArtA","onchange","busqueda","terminoBusqueda","fetch","URLSearchParams","buscar","then","json","data","listaResultados","innerHTML","resultado","nombre","nuevoElemento","codigo","catch","botonesNumerico","boton","valorBoton","innerText","botonBorrar","calcularDevolver","devolver","busquedaTarjetas","calcularDescuento","descuento","cobrar[tRegalo]","resultadoTarjeta","importe","ready","click","this","val","datos","serialize","total","entregado","importeTarjeta","subCobro","type","respuesta","callback","jqXHR","textStatus","errorThrown","enlace","imprimirticket","abrirCajon"],"mappings":"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","file":"app.js","sourcesContent":["// seleccionar enlace y prevenir default para que no se recargue la pagina\r\nif (window.location.href.indexOf(\"dispositivos.php\") > -1) {\r\n  let enlace = document.querySelector('#btnImprimir');\r\n  enlace.addEventListener('click',function(event) {\r\n      event.preventDefault();\r\n  } );\r\n  // mandar llamar imprimir.php desde el enlace\r\n  document.getElementById(\"btnImprimir\").addEventListener(\"click\", function() {\r\n$.ajax({\r\n  url: 'imprimir.php',\r\n  method: 'GET',\r\n  success: function(response) {\r\n    console.log(response);\r\n  },\r\n  error: function(xhr, status, error) {\r\n    console.log(xhr);\r\n  }\r\n});\r\n});\r\n};\r\n//modal categorias\r\nlet btnNewCat = document.querySelector('#btnNewCat');\r\nlet btnCerrar = document.querySelector('#btnCerrar');\r\nlet abrir = document.querySelector('.abrirCat');\r\nlet body = document.querySelector('.body');\r\nif (btnNewCat) {\r\n  btnNewCat.addEventListener('click', function() {\r\n    body.style.overflow = 'hidden';\r\n    abrir.style.display = 'block';\r\n  })\r\n}\r\nif (btnCerrar) {\r\n  btnCerrar.addEventListener('click', function() {\r\n    body.style.overflow = 'auto';\r\n    abrir.style.display = 'none';\r\n  })\r\n}\r\n//modal Cliente\r\nlet abrirCliente = document.querySelector('#abrirCliente');\r\nlet cerrarCliente = document.querySelector('#cerrarCliente');\r\nlet abrirModal = document.querySelector('.modalCliente');\r\nif (abrirCliente) {\r\n  abrirCliente.addEventListener('click', function() {\r\n    body.style.overflow = 'hidden';\r\n    abrirModal.style.display = 'block';\r\n  })\r\n}\r\nif (cerrarCliente) {\r\n  cerrarCliente.addEventListener('click', function() {\r\n    body.style.overflow = 'auto';\r\n    abrirModal.style.display = 'none';\r\n  })\r\n}\r\n//modal Cliente\r\nlet abrirACliente = document.querySelector('#abrirACliente');\r\nlet cerrarACliente = document.querySelector('#cerrarACliente');\r\nlet abrirAModal = document.querySelector('.modalACliente');\r\nif (abrirACliente) {\r\n  abrirACliente.addEventListener('click', function() {\r\n    body.style.overflow = 'hidden';\r\n    abrirAModal.style.display = 'block';\r\n  })\r\n}\r\nif (cerrarACliente) {\r\n  cerrarACliente.addEventListener('click', function() {\r\n    body.style.overflow = 'auto';\r\n    abrirAModal.style.display = 'none';\r\n  })\r\n}\r\n//modal Cliente\r\nlet abrirModalPrecio = document.querySelectorAll('[class*=abrirModalPrecio]');\r\nlet cerrarModalPrecio = document.querySelectorAll('[class*=cerrarModalPrecio]');\r\nif (abrirModalPrecio) {\r\n  abrirModalPrecio.forEach(function(btn) {\r\n    btn.addEventListener('click', function() {\r\n      let id = btn.getAttribute('id');\r\n      let modalPrecio = document.querySelector('.modalPrecio' + id);\r\n      body.style.overflow = 'hidden';\r\n      modalPrecio.style.display = 'block';\r\n    })\r\n  })\r\n  }\r\nif (cerrarModalPrecio) {\r\n  cerrarModalPrecio.forEach(function(btn) {\r\n    btn.addEventListener('click', function() {\r\n      let id = btn.getAttribute('id');\r\n      let modalPrecio = document.querySelector('.modalPrecio' + id);\r\n      body.style.overflow = 'auto';\r\n      modalPrecio.style.display = 'none';\r\n    })\r\n  })\r\n  }\r\nlet btnNewCatEditar = document.querySelectorAll('[class*=abrirEditarCat]');\r\nlet btnCerrarEditar = document.querySelectorAll('[class*=cerrarEditarCat]');\r\nif (btnNewCatEditar) {\r\n  btnNewCatEditar.forEach(function(btn) {\r\n    btn.addEventListener('click', function() {\r\n    let id = btn.getAttribute('id');\r\n    let abrirEditar = document.querySelector('.editarCat' + id);\r\n    body.style.overflow = 'hidden';\r\n    abrirEditar.style.display = 'block';\r\n  })\r\n})\r\n}\r\nif (btnCerrarEditar) {\r\nbtnCerrarEditar.forEach(function(btn) {\r\n  btn.addEventListener('click', function() {\r\n    let id = btn.getAttribute('id');\r\n    let abrirEditar = document.querySelector('.editarCat' + id);\r\n    body.style.overflow = 'auto';\r\n    abrirEditar.style.display = 'none';\r\n  })\r\n})\r\n}\r\n//modal articulos\r\nlet btnNewArt = document.querySelector('#btnNewArt');\r\nlet btnCerrarArt = document.querySelector('#btnCerrarArt');\r\nlet abrirArt = document.querySelector('.abrirArt');\r\nif (btnNewArt) {\r\n  btnNewArt.addEventListener('click', function() {\r\n    body.style.overflow = 'hidden';\r\n    abrirArt.style.display = 'block';\r\n  })\r\n}\r\nif (btnCerrarArt) {\r\n  btnCerrarArt.addEventListener('click', function() {\r\n    body.style.overflow = 'auto';\r\n    abrirArt.style.display = 'none';\r\n  })\r\n}\r\nlet btnNewArtA = document.querySelectorAll('[class*=btnNewArtA]');\r\nlet btnCerrarArtA = document.querySelectorAll('[class*=btnCerrarArtA]');\r\nbtnNewArtA.forEach(function(btn) {\r\n  btn.addEventListener('click', function() {\r\n    let id = btn.getAttribute('id') // Obtener el id del registro a partir del id del botón\r\n    let abrirArtA = document.querySelector('.abrirArtA' + id);\r\n    body.style.overflow = 'hidden';\r\n    abrirArtA.style.display = 'block';\r\n  });\r\n});\r\nbtnCerrarArtA.forEach(function(btn) {\r\n  btn.addEventListener('click', function() {\r\n    let id = btn.getAttribute('id') // Obtener el id del registro a partir del id del botón\r\n    let abrirArtA = document.querySelector('.abrirArtA' + id);\r\n    body.style.overflow = 'auto';\r\n    abrirArtA.style.display = 'none';\r\n  });\r\n});\r\n// calculo valores formulario crear y editar articulos\r\nfunction calcularPrecioVenta() {\r\n  var base = document.getElementById(\"basePvp\").value;\r\n  var iva = document.getElementById(\"iva\").value;\r\n  var precioVenta = (parseFloat(base) * (1 + (parseFloat(iva) / 100))).toFixed(2);\r\n  document.getElementById(\"pvp\").value = precioVenta;\r\n}\r\nfunction calcularBase() {\r\n  var precioVenta = document.getElementById(\"pvp\").value;\r\n  var iva = document.getElementById(\"iva\").value;\r\n  var base = (precioVenta / (1 + (iva / 100))).toFixed(2);\r\n  document.getElementById(\"basePvp\").value = base;\r\n}\r\nfunction calcularBaseCompra() {\r\n  var precioCompra = document.getElementById(\"precioCompra\").value;\r\n  var iva = document.getElementById(\"iva\").value;\r\n  var base = (precioCompra / (1 + (iva / 100))).toFixed(2);\r\n  document.getElementById(\"baseCompra\").value = base;\r\n}\r\nfunction calcularPrecioCompra() {\r\n  var base = document.getElementById(\"baseCompra\").value;\r\n  var iva = document.getElementById(\"iva\").value;\r\n  var precioCompra = (parseFloat(base) * (1 + (parseFloat(iva) / 100))).toFixed(2);\r\n  document.getElementById(\"precioCompra\").value = precioCompra;\r\n}\r\n\r\nbtnNewArtA.forEach(function(btn) {\r\n  let id = btn.getAttribute('id');\r\n\r\n  function calcularPrecioVenta() {\r\n    var base = document.getElementById(\"basePvp\" + id).value;\r\n    var iva = document.getElementById(\"iva\" + id).value;\r\n    var precioVenta = (parseFloat(base) * (1 + (parseFloat(iva) / 100))).toFixed(2);\r\n    document.getElementById(\"pvp\" + id).value = precioVenta;\r\n  }\r\n  function calcularBase() {\r\n    var precioVenta = document.getElementById(\"pvp\" + id).value;\r\n    var iva = document.getElementById(\"iva\" + id).value;\r\n    var base = (precioVenta / (1 + (iva / 100))).toFixed(2);\r\n    document.getElementById(\"basePvp\" + id).value = base;\r\n  }\r\n  function calcularBaseCompra() {\r\n    var precioCompra = document.getElementById(\"precioCompra\" + id).value;\r\n    var iva = document.getElementById(\"iva\" + id).value;\r\n    var base = (precioCompra / (1 + (iva / 100))).toFixed(2);\r\n    document.getElementById(\"baseCompra\" + id).value = base;\r\n  }\r\n  function calcularPrecioCompra() {\r\n    var base = document.getElementById(\"baseCompra\" + id).value;\r\n    var iva = document.getElementById(\"iva\" + id).value;\r\n    var precioCompra = (parseFloat(base) * (1 + (parseFloat(iva) / 100))).toFixed(2);\r\n    document.getElementById(\"precioCompra\" + id).value = precioCompra;\r\n  }\r\n\r\n  // Llamar a las funciones de cálculo cada vez que haya cambios en los campos de entrada\r\n  document.getElementById(\"basePvp\" + id).onchange = function() {\r\n    calcularPrecioVenta();\r\n    calcularBase();\r\n  };\r\n\r\n  document.getElementById(\"pvp\" + id).onchange = function() {\r\n    calcularBase();\r\n    calcularPrecioCompra();\r\n  };\r\n \r\n\r\n  document.getElementById(\"precioCompra\" + id).onchange = function() {\r\n    calcularBaseCompra();\r\n    calcularPrecioCompra();\r\n  };\r\n\r\n  document.getElementById(\"iva\" + id).onchange = function() {\r\n    calcularBaseCompra();\r\n    calcularPrecioCompra();\r\n    calcularBase();\r\n    calcularPrecioVenta();\r\n  };\r\n\r\n})\r\n// OBTENER GET Y CONCATENAR\r\nfunction addParamCat(event) {\r\n  event.preventDefault();  \r\n  \r\n  // Obtener la URL actual\r\n  let url = window.location.href;\r\n  \r\n  // Obtener los parámetros GET actuales\r\n  // let params = window.location.search.replace('?', '&');\r\n  \r\n  // Obtener el valor del nuevo parámetro\r\n  let newParamValue = event.target.previousElementSibling.value;\r\n  \r\n  // Codificar el valor del nuevo parámetro\r\n  let encodedNewParamValue = encodeURIComponent(newParamValue);\r\n\r\n  // Comprobar si la URL ya tiene un parámetro GET\r\n  let separator = url.indexOf('?') !== -1 ? '&' : '?';\r\n  \r\n  // Concatenar la URL actual con el nuevo parámetro\r\n  let newUrl = url + separator + \"cat=\" + encodedNewParamValue;\r\n  \r\n  // Redirigir a la nueva URL\r\n  window.location.href = newUrl;\r\n\r\n}\r\n\r\n//Obtener el campo de búsqueda\r\nconst busqueda = document.querySelector('#busqueda');\r\n\r\n//Detectar cuando se escribe en el campo de búsqueda\r\nbusqueda.addEventListener('keyup', function() {\r\n  //Obtener el valor del campo de búsqueda\r\n  const terminoBusqueda = busqueda.value;\r\n  //Enviar una solicitud AJAX para obtener los resultados\r\n  fetch('buscar.php', {\r\n    method: 'POST',\r\n    body: new URLSearchParams({\r\n      'buscar': terminoBusqueda\r\n    })\r\n  })\r\n  .then(function(response) {\r\n    return response.json();\r\n  })\r\n  .then(function(data) {\r\n    //Limpiar la lista de resultados\r\n    const listaResultados = document.querySelector('#resultados');\r\n    listaResultados.innerHTML = '';\r\n    //Recorrer los elementos de data y agregarlos como nuevos elementos <li> en la lista\r\n    data.forEach(function(resultado) {\r\n      const nombre = resultado.nombre;\r\n      const codigo = resultado.codigo;\r\n      const nuevoElemento = '<option value=\"' + nombre + '\">';\r\n      listaResultados.innerHTML += nuevoElemento;\r\n    });\r\n  })\r\n  .catch(function(error) {\r\n    console.error(error);\r\n  });\r\n});\r\n // Obtiene una referencia a todos los botones con la clase \"numerico\"\r\n const botonesNumerico = document.querySelectorAll('.numerico');\r\n    \r\n // Agrega un evento de clic a cada botón\r\n if (botonesNumerico) {\r\n  botonesNumerico.forEach(boton => {\r\n    boton.addEventListener('click', (event) => {\r\n      event.preventDefault();\r\n        const valorBoton = boton.innerText;\r\n        const campoCantidad = document.querySelector('input[name=\"cantidad\"]');\r\n        campoCantidad.value += valorBoton;\r\n    });\r\n});\r\n }\r\n const botonBorrar = document.querySelector('.numerico-borrar');\r\n    \r\n // Agrega un evento de clic a cada botón\r\n if (botonBorrar) {\r\n    botonBorrar.addEventListener('click', (event) => {\r\n      event.preventDefault();\r\n        const campoCantidad = document.querySelector('input[name=\"cantidad\"]');\r\n        campoCantidad.value = \"\";\r\n    });\r\n\r\n }\r\n//  document.getElementById(\"cobrar\").addEventListener(\"click\", function(event) {\r\n//   event.preventDefault(); // Detener el envío del formulario\r\n\r\n//   // Hacer clic en ambos botones de envío\r\n//   document.getElementById(\"total\").click();\r\n// });\r\n\r\nfunction calcularDevolver() {\r\n    var entregado = parseFloat(document.getElementById(\"entregado\").value);\r\n    var total = parseFloat(document.getElementById(\"precioTotal\").value);\r\n    var devolver = entregado - total;\r\n    document.getElementById(\"devolver\").value = devolver.toFixed(2);\r\n}\r\n\r\n//Obtener el campo de búsqueda de tarjetas\r\nconst busquedaTarjetas = document.querySelector('#busquedaTarjetas');\r\n\r\n//Detectar cuando se escribe en el campo de búsqueda de Tarjetas\r\nbusquedaTarjetas.addEventListener('change', function() {\r\n  //Obtener el valor del campo de búsqueda\r\n  const terminoBusqueda = busquedaTarjetas.value;\r\n  //Enviar una solicitud AJAX para obtener los resultados\r\n  fetch('buscartarjetas.php', {\r\n    method: 'POST',\r\n    body: new URLSearchParams({\r\n      'cobrar[tRegalo]': terminoBusqueda\r\n    })\r\n  })\r\n  .then(function(response) {\r\n    return response.json();\r\n  })\r\n  .then(function(data) {\r\n    //Limpiar la lista de resultados\r\n    const resultadoTarjeta = document.querySelector('#importeTarjeta');\r\n\r\n    //Recorrer los elementos de data y agregarlos como nuevos elementos <li> en la lista\r\n    data.forEach(function(resultado) {\r\n      resultadoTarjeta.value = '';\r\n      const importe = resultado.importe;\r\n      resultadoTarjeta.value += importe;\r\n    });\r\n    calcularDescuento();\r\n  })\r\n  .catch(function(error) {\r\n    console.error(error);\r\n  });\r\n});\r\nfunction calcularDescuento() {\r\n  var entregado = parseFloat(document.getElementById(\"importeTarjeta\").value);\r\n  var total = parseFloat(document.getElementById(\"precioTotal\").value);\r\n  var descuento = entregado + total;\r\n  document.getElementById(\"precioTotal\").value = descuento.toFixed(2);\r\n}\r\n\r\n  \r\n\r\n// const descontarTarjeta = document.querySelector('#importeTarjeta');\r\n// const totalInput = document.querySelector('#precioTotal');\r\n\r\n// descontarTarjeta.addEventListener('input', function(){\r\n//   const total = parseFloat(totalInput.value);\r\n//   if (!isNaN(total)) {\r\n//     const nuevoTotal = parseFloat(descontarTarjeta.value) - total;\r\n//     totalInput.value = nuevoTotal.toFixed(2); //toFixed(2) para mostrar 2 decimales\r\n//   }\r\n// });\r\n\r\n\r\n$(document).ready(function() {\r\n  // Seleccionar los botones de envío\r\n  $('.pagar').click(function(event) {\r\n    // Evitar que el formulario se envíe por el método POST\r\n    event.preventDefault();\r\n\r\n    // Obtener el valor del botón pulsado\r\n    var boton = $(this).val();\r\n\r\n    // Actualizar el campo oculto en el formulario\r\n    $('#boton-pulsado').val(boton);\r\n\r\n    // Obtener los datos del formulario\r\n    var datos = $('#mi-formulario').serialize();\r\n    var total = document.querySelector('#precioTotal');\r\n    var entregado = document.querySelector('#entregado');\r\n    var devolver = document.querySelector('#devolver');\r\n    var importeTarjeta = document.querySelector('#importeTarjeta');\r\n    var busquedaTarjetas = document.querySelector('#busquedaTarjetas');\r\n    var subCobro = document.querySelector('#subCobro');\r\n    if (total.value > 99999999 || total.value == '' || entregado.value > 99999999 || devolver.value > 99999999 || importeTarjeta.value > 99999999 || busquedaTarjetas.value > 99999999 || subCobro.value > 99999999 || subCobro.value == '') {\r\n      window.location.href = 'venta.php?r=12';\r\n    } else {\r\n      // Enviar los datos mediante AJAX al archivo PHP que procesa el formulario\r\n      $.ajax({\r\n        url: 'venta.php',\r\n        type: 'POST',\r\n        data: datos,\r\n        success: function(respuesta) {\r\n          // Manejar la respuesta del servidor\r\n          console.log(respuesta);\r\n  \r\n          // Llamar a la función imprimir() después de que se haya completado la petición AJAX\r\n          imprimir(function() {\r\n            // Redireccionar a venta.php después de que se haya completado la petición AJAX en imprimir()\r\n            var total = document.querySelector('#precioTotal');\r\n            if (total.value < 0) {\r\n              window.location.href = 'venta.php?r=7';\r\n            } else {\r\n              window.location.href = 'venta.php';\r\n            }\r\n  \r\n          });\r\n        },\r\n        error: function(jqXHR, textStatus, errorThrown) {\r\n          // Manejar errores\r\n          console.error(textStatus, errorThrown);\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  // Función para imprimir el ticket\r\n  function imprimir(callback) {\r\n    // Realiza la petición Ajax para imprimir.php\r\n    $.ajax({\r\n      url: 'imprimirticket.php',\r\n      method: 'GET',\r\n      success: function(response) {\r\n        console.log(response);\r\n        // Llamar al callback después de que se haya completado la petición AJAX en imprimir()\r\n        callback();\r\n      },\r\n      error: function(xhr, status, error) {\r\n        console.log(xhr);\r\n      }\r\n    });\r\n  }\r\n});\r\n// seleccionar enlace y prevenir default para que no se recargue la pagina\r\n  let enlace = document.querySelector('#ticketRegalo');\r\n  enlace.addEventListener('click',function(event) {\r\n      event.preventDefault();\r\n  } );\r\n  // mandar llamar imprimir.php desde el enlace\r\n  enlace.addEventListener(\"click\", function() {\r\n$.ajax({\r\n  url: 'regalo.php',\r\n  method: 'GET',\r\n  success: function(response) {\r\n    console.log(response);\r\n  },\r\n  error: function(xhr, status, error) {\r\n    console.log(xhr);\r\n  }\r\n});\r\n});\r\n// seleccionar enlace y prevenir default para que no se recargue la pagina\r\nlet imprimirticket = document.querySelector('#ticket');\r\nimprimirticket.addEventListener('click',function(event) {\r\n    event.preventDefault();\r\n} );\r\n// mandar llamar imprimir.php desde el enlace\r\nimprimirticket.addEventListener(\"click\", function() {\r\n$.ajax({\r\nurl: 'imprimirticket.php',\r\nmethod: 'GET',\r\nsuccess: function(response) {\r\n  console.log(response);\r\n},\r\nerror: function(xhr, status, error) {\r\n  console.log(xhr);\r\n}\r\n});\r\n});\r\n// seleccionar enlace y prevenir default para que no se recargue la pagina\r\nlet abrirCajon = document.querySelector('#abrirCajon');\r\nabrirCajon.addEventListener('click',function(event) {\r\n    event.preventDefault();\r\n} );\r\n// mandar llamar imprimir.php desde el enlace\r\nabrirCajon.addEventListener(\"click\", function() {\r\n$.ajax({\r\nurl: 'abrircajon.php',\r\nmethod: 'GET',\r\nsuccess: function(response) {\r\n  console.log(response);\r\n},\r\nerror: function(xhr, status, error) {\r\n  console.log(xhr);\r\n}\r\n});\r\n});\r\n"]}