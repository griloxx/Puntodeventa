if(window.location.href.indexOf("dispositivos.php")>-1){document.querySelector("#btnImprimir").addEventListener("click",(function(e){e.preventDefault()})),document.getElementById("btnImprimir").addEventListener("click",(function(){$.ajax({url:"imprimir.php",method:"GET",success:function(e){console.log(e)},error:function(e,t,r){console.log(e)}})}))}let btnNewCat=document.querySelector("#btnNewCat"),btnCerrar=document.querySelector("#btnCerrar"),abrir=document.querySelector(".abrirCat"),body=document.querySelector(".body");btnNewCat&&btnNewCat.addEventListener("click",(function(){body.style.overflow="hidden",abrir.style.display="block"})),btnCerrar&&btnCerrar.addEventListener("click",(function(){body.style.overflow="auto",abrir.style.display="none"}));let abrirCliente=document.querySelector("#abrirCliente"),cerrarCliente=document.querySelector("#cerrarCliente"),abrirModal=document.querySelector(".modalCliente");abrirCliente&&abrirCliente.addEventListener("click",(function(){body.style.overflow="hidden",abrirModal.style.display="block"})),cerrarCliente&&cerrarCliente.addEventListener("click",(function(){body.style.overflow="auto",abrirModal.style.display="none"}));let abrirACliente=document.querySelector("#abrirACliente"),cerrarACliente=document.querySelector("#cerrarACliente"),abrirAModal=document.querySelector(".modalACliente");abrirACliente&&abrirACliente.addEventListener("click",(function(){body.style.overflow="hidden",abrirAModal.style.display="block"})),cerrarACliente&&cerrarACliente.addEventListener("click",(function(){body.style.overflow="auto",abrirAModal.style.display="none"}));let abrirModalPrecio=document.querySelectorAll("[class*=abrirModalPrecio]"),cerrarModalPrecio=document.querySelectorAll("[class*=cerrarModalPrecio]");abrirModalPrecio&&abrirModalPrecio.forEach((function(e){e.addEventListener("click",(function(){let t=e.getAttribute("id"),r=document.querySelector(".modalPrecio"+t);body.style.overflow="hidden",r.style.display="block"}))})),cerrarModalPrecio&&cerrarModalPrecio.forEach((function(e){e.addEventListener("click",(function(){let t=e.getAttribute("id"),r=document.querySelector(".modalPrecio"+t);body.style.overflow="auto",r.style.display="none"}))}));let btnNewCatEditar=document.querySelectorAll("[class*=abrirEditarCat]"),btnCerrarEditar=document.querySelectorAll("[class*=cerrarEditarCat]");btnNewCatEditar&&btnNewCatEditar.forEach((function(e){e.addEventListener("click",(function(){let t=e.getAttribute("id"),r=document.querySelector(".editarCat"+t);body.style.overflow="hidden",r.style.display="block"}))})),btnCerrarEditar&&btnCerrarEditar.forEach((function(e){e.addEventListener("click",(function(){let t=e.getAttribute("id"),r=document.querySelector(".editarCat"+t);body.style.overflow="auto",r.style.display="none"}))}));let btnNewArt=document.querySelector("#btnNewArt"),btnCerrarArt=document.querySelector("#btnCerrarArt"),abrirArt=document.querySelector(".abrirArt");btnNewArt&&btnNewArt.addEventListener("click",(function(){body.style.overflow="hidden",abrirArt.style.display="block"})),btnCerrarArt&&btnCerrarArt.addEventListener("click",(function(){body.style.overflow="auto",abrirArt.style.display="none"}));let btnNewArtA=document.querySelectorAll("[class*=btnNewArtA]"),btnCerrarArtA=document.querySelectorAll("[class*=btnCerrarArtA]");function calcularPrecioVenta(){var e=document.getElementById("basePvp").value,t=document.getElementById("iva").value,r=(parseFloat(e)*(1+parseFloat(t)/100)).toFixed(2);document.getElementById("pvp").value=r}function calcularBase(){var e=(document.getElementById("pvp").value/(1+document.getElementById("iva").value/100)).toFixed(2);document.getElementById("basePvp").value=e}function calcularBaseCompra(){var e=(document.getElementById("precioCompra").value/(1+document.getElementById("iva").value/100)).toFixed(2);document.getElementById("baseCompra").value=e}function calcularPrecioCompra(){var e=document.getElementById("baseCompra").value,t=document.getElementById("iva").value,r=(parseFloat(e)*(1+parseFloat(t)/100)).toFixed(2);document.getElementById("precioCompra").value=r}function addParamCat(e){e.preventDefault();let t=window.location.href,r=e.target.previousElementSibling.value,n=encodeURIComponent(r),o=-1!==t.indexOf("?")?"&":"?",a=t+o+"cat="+n;window.location.href=a}btnNewArtA.forEach((function(e){e.addEventListener("click",(function(){let t=e.getAttribute("id"),r=document.querySelector(".abrirArtA"+t);body.style.overflow="hidden",r.style.display="block"}))})),btnCerrarArtA.forEach((function(e){e.addEventListener("click",(function(){let t=e.getAttribute("id"),r=document.querySelector(".abrirArtA"+t);body.style.overflow="auto",r.style.display="none"}))})),btnNewArtA.forEach((function(e){let t=e.getAttribute("id");function r(){var e=document.getElementById("basePvp"+t).value,r=document.getElementById("iva"+t).value,n=(parseFloat(e)*(1+parseFloat(r)/100)).toFixed(2);document.getElementById("pvp"+t).value=n}function n(){var e=(document.getElementById("pvp"+t).value/(1+document.getElementById("iva"+t).value/100)).toFixed(2);document.getElementById("basePvp"+t).value=e}function o(){var e=(document.getElementById("precioCompra"+t).value/(1+document.getElementById("iva"+t).value/100)).toFixed(2);document.getElementById("baseCompra"+t).value=e}function a(){var e=document.getElementById("baseCompra"+t).value,r=document.getElementById("iva"+t).value,n=(parseFloat(e)*(1+parseFloat(r)/100)).toFixed(2);document.getElementById("precioCompra"+t).value=n}document.getElementById("basePvp"+t).onchange=function(){r(),n()},document.getElementById("pvp"+t).onchange=function(){n(),a()},document.getElementById("precioCompra"+t).onchange=function(){o(),a()},document.getElementById("iva"+t).onchange=function(){o(),a(),n(),r()}}));const busqueda=document.querySelector("#busqueda");busqueda.addEventListener("keyup",(function(){const e=busqueda.value;fetch("buscar.php",{method:"POST",body:new URLSearchParams({buscar:e})}).then((function(e){return e.json()})).then((function(e){const t=document.querySelector("#resultados");t.innerHTML="",e.forEach((function(e){const r=e.nombre,n=(e.codigo,'<option value="'+r+'">');t.innerHTML+=n}))})).catch((function(e){console.error(e)}))}));const botonesNumerico=document.querySelectorAll(".numerico");botonesNumerico&&botonesNumerico.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const r=e.innerText;document.querySelector('input[name="cantidad"]').value+=r})});const botonBorrar=document.querySelector(".numerico-borrar");function calcularDevolver(){var e=parseFloat(document.getElementById("entregado").value)-parseFloat(document.getElementById("precioTotal").value);document.getElementById("devolver").value=e.toFixed(2)}botonBorrar&&botonBorrar.addEventListener("click",e=>{e.preventDefault();document.querySelector('input[name="cantidad"]').value=""});const busquedaTarjetas=document.querySelector("#busquedaTarjetas");function calcularDescuento(){var e=parseFloat(document.getElementById("importeTarjeta").value)+parseFloat(document.getElementById("precioTotal").value);document.getElementById("precioTotal").value=e.toFixed(2)}busquedaTarjetas.addEventListener("change",(function(){const e=busquedaTarjetas.value;fetch("buscartarjetas.php",{method:"POST",body:new URLSearchParams({"cobrar[tRegalo]":e})}).then((function(e){return e.json()})).then((function(e){const t=document.querySelector("#importeTarjeta");e.forEach((function(e){t.value="";const r=e.importe;t.value+=r})),calcularDescuento()})).catch((function(e){console.error(e)}))})),$(document).ready((function(){$(".pagar").click((function(e){e.preventDefault();var t=$(this).val();$("#boton-pulsado").val(t);var r=$("#mi-formulario").serialize();$.ajax({url:"venta.php",type:"POST",data:r,success:function(e){var t;console.log(e),t=function(){document.querySelector("#precioTotal").value<0?window.location.href="venta.php?r=7":window.location.href="venta.php"},$.ajax({url:"imprimirticket.php",method:"GET",success:function(e){console.log(e),t()},error:function(e,t,r){console.log(e)}})},error:function(e,t,r){console.error(t,r)}})}))}));let enlace=document.querySelector("#ticketRegalo");enlace.addEventListener("click",(function(e){e.preventDefault()})),enlace.addEventListener("click",(function(){$.ajax({url:"regalo.php",method:"GET",success:function(e){console.log(e)},error:function(e,t,r){console.log(e)}})}));let imprimirticket=document.querySelector("#ticket");imprimirticket.addEventListener("click",(function(e){e.preventDefault()})),imprimirticket.addEventListener("click",(function(){$.ajax({url:"imprimirticket.php",method:"GET",success:function(e){console.log(e)},error:function(e,t,r){console.log(e)}})}));let abrirCajon=document.querySelector("#abrirCajon");abrirCajon.addEventListener("click",(function(e){e.preventDefault()})),abrirCajon.addEventListener("click",(function(){$.ajax({url:"abrircajon.php",method:"GET",success:function(e){console.log(e)},error:function(e,t,r){console.log(e)}})}));
//# sourceMappingURL=app.js.map
